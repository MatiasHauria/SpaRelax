package Vista;

import Modelo.Masajista;
import Persistencia.MasajistaData;
import static Vista.jfSpaRelax.listaMasajista;
import javax.swing.ButtonGroup;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

public class jifGestionMasajista extends javax.swing.JInternalFrame {

    private MasajistaData cd;
    private String estadoOperacion = "Ninguno";
    private int matriculaSeleccionada = 0;

    private final DefaultTableModel modelo = new DefaultTableModel() {
        @Override
        public boolean isCellEditable(int row, int column) {
            return false;
        }

    };

    public jifGestionMasajista() {
        initComponents();
        this.cd = new MasajistaData();
        armarCabecera();
        ButtonGroup grupo = new ButtonGroup();

        // Agregar los radio buttons al grupo
        grupo.add(jFacial);
        grupo.add(jCorporal);
        grupo.add(jEstetico);
        grupo.add(jRelajacion);
        grupo.add(jTodas);

    }

    /**
     * This method is called from within the constructor to initialize the form. WARNING: Do NOT modify this code. The content of this method is always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jNuevo = new javax.swing.JButton();
        jActualizar = new javax.swing.JButton();
        jBorrar = new javax.swing.JButton();
        jAlta = new javax.swing.JButton();
        jBaja = new javax.swing.JButton();
        jGuardar = new javax.swing.JButton();
        jmostrar = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jButton2 = new javax.swing.JButton();
        jButton1 = new javax.swing.JButton();
        jFacial = new javax.swing.JRadioButton();
        jRelajacion = new javax.swing.JRadioButton();
        jCorporal = new javax.swing.JRadioButton();
        jEstetico = new javax.swing.JRadioButton();
        jLabel7 = new javax.swing.JLabel();
        jTodas = new javax.swing.JRadioButton();
        jPanel1 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jTelefono = new javax.swing.JTextField();
        jNombrecompleto = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jMatricula = new javax.swing.JTextField();
        jEspecialidad = new javax.swing.JTextField();

        jLabel1.setFont(new java.awt.Font("Nimbus Sans", 1, 30)); // NOI18N
        jLabel1.setText("Gestión de Masajistas");

        jNuevo.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jNuevo.setText("Nuevo");
        jNuevo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jNuevoActionPerformed(evt);
            }
        });

        jActualizar.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jActualizar.setText("Actualizar");
        jActualizar.setEnabled(false);
        jActualizar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jActualizarActionPerformed(evt);
            }
        });

        jBorrar.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jBorrar.setText("Borrar");
        jBorrar.setEnabled(false);
        jBorrar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBorrarActionPerformed(evt);
            }
        });

        jAlta.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jAlta.setText("Alta");
        jAlta.setEnabled(false);
        jAlta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jAltaActionPerformed(evt);
            }
        });

        jBaja.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jBaja.setText("Baja");
        jBaja.setEnabled(false);
        jBaja.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBajaActionPerformed(evt);
            }
        });

        jGuardar.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jGuardar.setText("Guardar");
        jGuardar.setEnabled(false);
        jGuardar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jGuardarActionPerformed(evt);
            }
        });

        jmostrar.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jmostrar.setText("Mostrar Masajistas");
        jmostrar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jmostrarActionPerformed(evt);
            }
        });

        jTable1.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jTable1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTable1MouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(jTable1);

        jButton2.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jButton2.setText("Salir");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        jButton1.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jButton1.setText("Ocultar Masajistas");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jFacial.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jFacial.setText("Facial");

        jRelajacion.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jRelajacion.setText("Relajación");

        jCorporal.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jCorporal.setText("Corporal");

        jEstetico.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jEstetico.setText("Estético");
        jEstetico.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jEsteticoActionPerformed(evt);
            }
        });

        jLabel7.setFont(new java.awt.Font("Nimbus Sans", 1, 24)); // NOI18N
        jLabel7.setText("Especialidades");

        jTodas.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jTodas.setSelected(true);
        jTodas.setText("Todas");

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Ingreso de datos", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Ubuntu", 0, 14))); // NOI18N

        jLabel2.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jLabel2.setText("Matricula:");

        jTelefono.setEnabled(false);

        jNombrecompleto.setEnabled(false);

        jLabel4.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jLabel4.setText("Teléfono:");

        jLabel5.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jLabel5.setText("Especialidad:");

        jLabel3.setFont(new java.awt.Font("Ubuntu", 0, 14)); // NOI18N
        jLabel3.setText("Nombre completo:");

        jMatricula.setEnabled(false);

        jEspecialidad.setEnabled(false);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel3)
                        .addGap(2, 2, 2))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel5)
                            .addComponent(jLabel4))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)))
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(jNombrecompleto, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 229, Short.MAX_VALUE)
                    .addComponent(jTelefono, javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jMatricula)
                    .addComponent(jEspecialidad, javax.swing.GroupLayout.Alignment.LEADING))
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(jMatricula, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jNombrecompleto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(jTelefono, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(jEspecialidad, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(18, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(51, 51, 51)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jEstetico, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTodas)
                    .addComponent(jRelajacion)
                    .addComponent(jFacial)
                    .addComponent(jCorporal))
                .addGap(19, 19, 19))
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(99, 99, 99)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(jAlta)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jBaja)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jBorrar)
                                .addGap(50, 50, 50))
                            .addComponent(jLabel1))
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jNuevo, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jActualizar)
                            .addComponent(jGuardar, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(79, 79, 79)
                        .addComponent(jmostrar)
                        .addGap(17, 17, 17)
                        .addComponent(jButton1)
                        .addGap(18, 18, 18)
                        .addComponent(jButton2)))
                .addGap(0, 60, Short.MAX_VALUE))
            .addGroup(layout.createSequentialGroup()
                .addGap(217, 217, 217)
                .addComponent(jLabel7)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap(15, Short.MAX_VALUE)
                .addComponent(jLabel1)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(15, 15, 15)
                        .addComponent(jNuevo)
                        .addGap(18, 18, 18)
                        .addComponent(jActualizar)
                        .addGap(18, 18, 18)
                        .addComponent(jGuardar))
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(25, 25, 25)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jAlta)
                    .addComponent(jBaja)
                    .addComponent(jBorrar))
                .addGap(18, 18, 18)
                .addComponent(jLabel7)
                .addGap(17, 17, 17)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jTodas)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jEstetico)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jRelajacion)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jFacial)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jCorporal))
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 159, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jButton1)
                        .addComponent(jmostrar))
                    .addComponent(jButton2))
                .addGap(13, 13, 13))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents
    
    private Masajista buscarMasajistaPorMatricula(int matriculaSeleccionada) {
        listaMasajista = cd.obtenerMasajista();

        for (Masajista m : listaMasajista) {
            if (m.getMatricula() == matriculaSeleccionada) {
                return m;
            }
        }
        return null;
    }
    private void jNuevoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jNuevoActionPerformed
        estadoOperacion = "Nuevo";

        jMatricula.setText("");
        jNombrecompleto.setText("");
        jTelefono.setText("");
        jEspecialidad.setText("");

        jMatricula.setEnabled(true);
        jNombrecompleto.setEnabled(true);
        jTelefono.setEnabled(true);
        jEspecialidad.setEnabled(true);

        jNuevo.setEnabled(false);
        jGuardar.setEnabled(true);
    }//GEN-LAST:event_jNuevoActionPerformed

    private void jmostrarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jmostrarActionPerformed
        String filtro = "";
        if (jFacial.isSelected()) {
            filtro = "Facial";
            listaMasajista = cd.obtenerMasajistasPorEspecialidad(filtro);
            armarFilas();
        } else if (jCorporal.isSelected()) {
            filtro = "Corporal";
            listaMasajista = cd.obtenerMasajistasPorEspecialidad(filtro);
            armarFilas();
        } else if (jEstetico.isSelected()) {
            filtro = "Estético";
            listaMasajista = cd.obtenerMasajistasPorEspecialidad(filtro);
            armarFilas();
        } else if (jRelajacion.isSelected()) {
            filtro = "Relajacion";
            listaMasajista = cd.obtenerMasajistasPorEspecialidad(filtro);
            armarFilas();
        } else if (jTodas.isSelected()) {
            listaMasajista = cd.obtenerMasajista();
            armarFilas();
        }


    }//GEN-LAST:event_jmostrarActionPerformed

    private void jBorrarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBorrarActionPerformed
        jNuevo.setEnabled(false);
        jActualizar.setEnabled(false);

        int filaSeleccionada = jTable1.getSelectedRow();

        if (filaSeleccionada != -1) {
            int opcion = JOptionPane.showConfirmDialog(this, "Estas seguro de que queres borrar los datos del Masajista?",
                    "Confirmar Borrado", JOptionPane.YES_NO_OPTION);
            if (opcion == JOptionPane.YES_OPTION) {
                Object valorMatricula = jTable1.getValueAt(filaSeleccionada, 0);
                int MatriculaMasajista = Integer.parseInt(valorMatricula.toString());
                Masajista masajistaSeleccionado = buscarMasajistaPorMatricula(MatriculaMasajista);

                if (masajistaSeleccionado != null) {
                    cd.borrarMasajista(masajistaSeleccionado.getMatricula());
                    JOptionPane.showMessageDialog(this, "Masajista borrado con exito.");

                    armarFilas();
                    jMatricula.setText("");
                    jNombrecompleto.setText("");
                    jTelefono.setText("");
                    jEspecialidad.setText("");
                    
                    jBorrar.setEnabled(false);
                    jNuevo.setEnabled(true);
                    jAlta.setEnabled(false);
                    jBaja.setEnabled(false);
                } else {
                    JOptionPane.showMessageDialog(this, "No se encontro el Masajista.", "Error de Busqueda",
                            JOptionPane.ERROR_MESSAGE);
                }
            }
        } else {
            JOptionPane.showMessageDialog(this, "No se Encontro la Fila Seleccionada.", "Error de Busqueda",
                    JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_jBorrarActionPerformed

    private void jActualizarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jActualizarActionPerformed
        int filaSeleccionada = jTable1.getSelectedRow();

        if (filaSeleccionada != -1) {
            Object valorMatricula = jTable1.getValueAt(filaSeleccionada, 0);

            int matriculaMasajista = Integer.parseInt(valorMatricula.toString());
            this.matriculaSeleccionada = matriculaMasajista;
            Masajista masajistaSeleccionado = buscarMasajistaPorMatricula(matriculaMasajista);

            if (masajistaSeleccionado != null) {
                estadoOperacion = "Actualizar";
                
                jMatricula.setText(String.valueOf(masajistaSeleccionado.getMatricula()));
                jNombrecompleto.setText(masajistaSeleccionado.getNombreCompleto());
                jTelefono.setText(String.valueOf(masajistaSeleccionado.getTelefono()));
                jEspecialidad.setText(String.valueOf(masajistaSeleccionado.getEspecialidad()));

                jMatricula.setEnabled(true);
                jNombrecompleto.setEnabled(true);
                jTelefono.setEnabled(true);
                jEspecialidad.setEnabled(true);

                jGuardar.setEnabled(true);
                jNuevo.setEnabled(false);
                jBorrar.setEnabled(false);
                jActualizar.setEnabled(false);
                jAlta.setEnabled(false);
                jBaja.setEnabled(false);
            }
        }
    }//GEN-LAST:event_jActualizarActionPerformed

    private void jAltaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jAltaActionPerformed
        if (jTable1.getSelectedRow() != -1) {
            int matricula = 0;
            Integer matriculaMasajista = (Integer) modelo.getValueAt(jTable1.getSelectedRow(), matricula);
            for (Masajista m : cd.obtenerMasajista()) {
                if (matriculaMasajista == m.getMatricula() && m.isEstado() == true) {
                    JOptionPane.showMessageDialog(this, "El Masajista ya se encuentra activo.");
                    return;
                } else if (matriculaMasajista == m.getMatricula() && m.isEstado() == false) {
                    cd.altaMasajista(matriculaMasajista);
                    JOptionPane.showMessageDialog(this, "Masajista dado de alta exitosamente.");
                }
            }
        } else {
            JOptionPane.showMessageDialog(this, "Seleccione una fila antes de continuar.");
        }
        armarFilas();
        
    }//GEN-LAST:event_jAltaActionPerformed

    private void jBajaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBajaActionPerformed
        if (jTable1.getSelectedRow() != -1) {
            int matricula = 0;
            Integer matriculaMasajista = (Integer) modelo.getValueAt(jTable1.getSelectedRow(), matricula);
            for (Masajista m : cd.obtenerMasajista()) {
                if (matriculaMasajista == m.getMatricula() && m.isEstado() == false) {
                    JOptionPane.showMessageDialog(this, "El Masajista ya se encuentra Inactivo.");
                    return;
                } else if (matriculaMasajista == m.getMatricula() && m.isEstado() == true) {
                    cd.bajaMasajista(matriculaMasajista);
                    JOptionPane.showMessageDialog(this, "Masajista dado de baja exitosamente.");
                }
            }
        } else {
            JOptionPane.showMessageDialog(this, "Seleccione una fila antes de continuar.");
        }
        armarFilas();
    }//GEN-LAST:event_jBajaActionPerformed

    private void jGuardarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jGuardarActionPerformed
        String regex = "^[a-zA-ZáéíóúÁÉÍÓÚñÑ\\s]+$";
        String regexnum = "^\\d+$";
        boolean masajistaExiste = false;

        if (jNombrecompleto.getText().isEmpty() || !jNombrecompleto.getText().matches(regex)) {
            JOptionPane.showMessageDialog(this, "El Nombre Completo no puede estar vacío y solo debe contener letras.", 
                "Error de formato", JOptionPane.ERROR_MESSAGE);
            return;
        }

        if (jMatricula.getText().isEmpty() || !jMatricula.getText().matches(regexnum)) {
            JOptionPane.showMessageDialog(this, "La Matrícula no puede estar vacía y solo debe contener números.",
                "Error de formato", JOptionPane.ERROR_MESSAGE);
            return;
        }

        if (jTelefono.getText().isEmpty() || !jTelefono.getText().matches(regexnum)) {
            JOptionPane.showMessageDialog(this, "El Teléfono no puede estar vacío y solo debe contener números.", 
                "Error de formato", JOptionPane.ERROR_MESSAGE);
            return;
        }

        if (!jEspecialidad.getText().isEmpty() && !jEspecialidad.getText().matches(regex)) {
            JOptionPane.showMessageDialog(this, "La Especialidad solo debe contener letras.", 
                "Error de formato", JOptionPane.ERROR_MESSAGE);
            return;
        }
        
        listaMasajista = cd.obtenerMasajista();
        int matriculaIngresada = Integer.parseInt(jMatricula.getText());
        
        if (estadoOperacion.equalsIgnoreCase("Nuevo")) {
            for (Masajista m : listaMasajista) {
                if (m.getMatricula() == matriculaIngresada) {
                    masajistaExiste = true;
                    break;
                }
            }
            
            if (masajistaExiste) {
                JOptionPane.showMessageDialog(this, "Ya existe un masajista con la matricula ingresada.", "Error. Masajista Existente", JOptionPane.ERROR_MESSAGE);
                return;
            }
            
            Masajista nuevoMasajista = new Masajista(Integer.parseInt(jMatricula.getText()),
                    jNombrecompleto.getText(), Long.parseLong(jTelefono.getText()), jEspecialidad.getText());

            cd.insertarMasajista(nuevoMasajista);
            JOptionPane.showMessageDialog(this, "¡Masajista agregado con exito!");

            estadoOperacion = "Ninguno";
        } else if (estadoOperacion.equalsIgnoreCase("Actualizar")) {
            int matriculaMasajistaActualizar = this.matriculaSeleccionada;
            Masajista masajistaActualizar = buscarMasajistaPorMatricula(matriculaMasajistaActualizar);
            
            if (masajistaActualizar != null) {
                cd.actualizarMasajista(    
                    Integer.parseInt(jMatricula.getText()),
                    matriculaMasajistaActualizar,    
                    jNombrecompleto.getText(),
                    Long.parseLong(jTelefono.getText()),
                    jEspecialidad.getText(),
                    masajistaActualizar.isEstado());
                
                    JOptionPane.showMessageDialog(this, "Masajista actualizado con Exito!");
                    this.matriculaSeleccionada = -1;
            } else {
                JOptionPane.showMessageDialog(this, "No se encontro el Masajista.", "Error de Busqueda",
                        JOptionPane.ERROR_MESSAGE);
            }
            estadoOperacion = "Ninguno";
        }
        armarFilas();
        
        jMatricula.setText("");
        jNombrecompleto.setText("");
        jTelefono.setText("");
        jEspecialidad.setText("");

        jGuardar.setEnabled(false);
        jNuevo.setEnabled(true);

        jMatricula.setEnabled(false);
        jNombrecompleto.setEnabled(false);
        jTelefono.setEnabled(false);
        jEspecialidad.setEnabled(false);
        jAlta.setEnabled(false);
        jBaja.setEnabled(false);

    }//GEN-LAST:event_jGuardarActionPerformed

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
        dispose();
    }//GEN-LAST:event_jButton2ActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        modelo.setRowCount(0);
    }//GEN-LAST:event_jButton1ActionPerformed

    private void jEsteticoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jEsteticoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jEsteticoActionPerformed

    private void jTable1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTable1MouseClicked
        int filaSeleccionada = jTable1.getSelectedRow();
        if (filaSeleccionada != -1) {
            jActualizar.setEnabled(true);
            jBorrar.setEnabled(true);
            jAlta.setEnabled(true);
            jBaja.setEnabled(true);
        }
    }//GEN-LAST:event_jTable1MouseClicked


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jActualizar;
    private javax.swing.JButton jAlta;
    private javax.swing.JButton jBaja;
    private javax.swing.JButton jBorrar;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JRadioButton jCorporal;
    private javax.swing.JTextField jEspecialidad;
    private javax.swing.JRadioButton jEstetico;
    private javax.swing.JRadioButton jFacial;
    private javax.swing.JButton jGuardar;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JTextField jMatricula;
    private javax.swing.JTextField jNombrecompleto;
    private javax.swing.JButton jNuevo;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JRadioButton jRelajacion;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jTable1;
    private javax.swing.JTextField jTelefono;
    private javax.swing.JRadioButton jTodas;
    private javax.swing.JButton jmostrar;
    // End of variables declaration//GEN-END:variables

    public void armarCabecera() {
        modelo.addColumn("Matricula");
        modelo.addColumn("Nombre Completo");
        modelo.addColumn("Especialidad");
        modelo.addColumn("Telefono");
        modelo.addColumn("Estado");

        jTable1.setModel(modelo);
    }

    private void armarFilas() {
        listaMasajista = cd.obtenerMasajista();
        modelo.setRowCount(0);
        if (!listaMasajista.isEmpty() || listaMasajista != null){
        for (Masajista m : listaMasajista) {
            Object[] fila = {
                m.getMatricula(),
                m.getNombreCompleto(),
                m.getEspecialidad(),
                m.getTelefono(),
                (m.isEstado() ? "Activo" : "Inactivo")
            };
            modelo.addRow(fila);
        }
    }
 }          
}
